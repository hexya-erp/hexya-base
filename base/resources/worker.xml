<?xml version="1.0" encoding="utf-8"?>
<hexya>
    <data>
        <view id="base_view_workers_tree" model="Worker">
            <tree string="Workers">
                <field name="Name"/>
                <field name="JobsInQueue"/>
                <field name="MaxThreads"/>
            </tree>
        </view>

        <view id="vase_view_workers_form" model="Worker">
            <form string="Workers">
                <sheet>
                    <h1>
                        <field name="Name" class="oe_inline"/>
                    </h1>
                    <group>
                        <field name="MaxThreads"/>
                        <field name="MaxHistoryEntries"/>
                    </group>
                    <group>
                        <div>
                            <label string="Max History Date"/>
                            <field name="MaxHistoryAmmount" style="width:30px"/>
                            <field name="MaxHistorySelection" style="width:53%"/>
                        </div>
                    </group>
                </sheet>
            </form>
        </view>

        <view id="base_view_jobs_history_tree" model="WorkerJobHistory">
            <tree   string="Job History"
                    decoration-success="status=='done'"
                    decoration-warning="status=='pending'"
                    decoration-danger="status=='fail'"
                    decoration-bf="status=='fail'"
                    decoration-primary="status=='running'"
                    decoration-muted="status=='abort', status=='cancel'"
                    decoration-it="status=='abort', status=='cancel'">
                <field name="TaskUUID"/>
                <field name="Name"/>
                <field name="StartDate"/>
                <field name="ReturnDate"/>
                <field name="Status"/>
            </tree>
        </view>

        <view id="base_view_jobs_history_form" model="WorkerJobHistory" delete="false">
            <form   string="Job History">
                <header>
                    <field name="Status" widget="statusbar"
                           statusbar_visible="pending,running"/>
                    <button name="requeue" class="oe_highlight" string="Requeue Job" type="object"/>
                    <button name="button_done" class="oe_highlight" string="Set to 'Done'" type="object"/>
                </header>
                <sheet>
                    <h1>
                        <field name="Name" class="oe_inline"/>
                    </h1>
                    <group>
                        <field name="WorkerName"/>
                        <field name="ModelName"/>
                        <field name="MethodName"/>
                        <field name="ParamsJson"/>
                    </group>
                    <group>
                        <group>
                            <field name="TaskUUID"/>
                        </group>
                        <group>
                            <field name="CreateDate"/>
                            <field name="QueuedDate"/>
                            <field name="StartDate"/>
                            <field name="ReturnDate"/>
                        </group>
                    </group>
                    <group name="method_output" string="Method Result" attrs="{'invisible': [('method_output', '=', False)]}">
                        <field nolabel="1" name="MethodOutput"/>
                    </group>
                    <group name="exc_info" string="Exception Information" attrs="{'invisible': [('exc_info', '=', False)]}">
                        <field nolabel="1" name="ExcInfo"/>
                    </group>
                </sheet>
            </form>
        </view>

        <action id="base_action_workers" name="Workers" type="ir.actions.act_window" model="Worker"
                view_mode="tree, form"/>

        <action id="base_action_jobs_history" name="Jobs" type="ir.actions.act_window" model="WorkerJobHistory"
                view_mode="tree, form"/>

        <menuitem id="base_menu_action_workers" name="Workers" sequence="3" action="base_action_workers"
                  parent="base_menu_crons_and_workers"/>
        <menuitem id="base_menu_action_jobs_history" name="Jobs" sequence="5" action="base_action_jobs_history"
                  parent="base_menu_crons_and_workers"/>
    </data>
</hexya>